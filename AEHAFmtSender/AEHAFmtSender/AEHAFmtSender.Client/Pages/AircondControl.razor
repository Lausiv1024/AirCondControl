@page "/aircond"
@inject HttpClient Http

<PageTitle>AircondControl</PageTitle>
<h3>AircondControl</h3>
<style>
    .controlContainer{
        padding : 20px;
    }

    .controlContainer button{
        padding: 20px;
    }

    .controlContainer a{
        padding: 20px;
    }
</style>
<div>
    <div class="form-check form-switch ">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" @bind="pwr">
        <label class="form-check-label" for="flexSwitchCheckDefault">Power</label>
    </div>
    <div class="controlContainer">
        <label>設定室温</label>
        <input type="number" id="degrees" name="deg" min="16" max="31" @bind="degree"/>
    </div>
    <h4>タイマー設定</h4>
    <div class="controlContainer">
        <select class="form-select" aria-label="Timer Select">
            <option selected>Off</option>
            <option value="OnTimer">オンタイマー</option>
            <option value="OffTimer">オフタイマー</option>
        </select>
        <div>
            <span class="controlContainer">
                <a>@timerDisplayValue</a>
                <button class="btn btn-primary" @onclick="ButtonAdd">+</button>
                <button class="btn btn-primary" @onclick="ButtonSubtract">-</button>
            </span>
        </div>
    </div>
    <span class="controlContainer">
        <button id="apply" class="btn btn-primary" @onclick="ButtonApply">Apply</button>
        <button id="cancel" class="btn btn-primary" @onclick="ButtonCancel">Cancel</button>
    </span>
</div>
@code {
    bool pwr;
    int degree = 28;
    string timerDisplayValue = string.Empty;
    int timerValue = 0;
    const int MAX_TIMER = 720;
    const int MIN_TIMER = 30;

    public void ButtonAdd()
    {
        if (timerValue < MAX_TIMER)
            timerValue += 30;
        updateTimerValue();
    }

    public void ButtonSubtract()
    {
        if (timerValue > MIN_TIMER)
            timerValue -= 30;
        updateTimerValue();
    }

    public void ButtonApply()
    {

    }

    public void ButtonCancel()
    {
        
    }

    private void updateTimerValue()
    {
        timerDisplayValue = $"{timerValue / 60}:{timerValue % 60}";
    }
}
